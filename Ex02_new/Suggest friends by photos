# from https://www.websequencediagrams.com/#
title Suggest friends by Photos

User->+":FacebookBackend": Instance()

opt theInstace==null
":FacebookBackend"->+"instace:FacebookBackend":new()
end
":FacebookBackend"->"instace:FacebookBackend":s_Instance
User->"instace:FacebookBackend": GetSuggestions(eRecommendationSource, m_LoggedInUser, i_maxResults, sort function)
"instace:FacebookBackend"->+":FriendsRecommenderProxy": GetSuggestions(i_LoggedInUser, i_MaxResults, i_OrderByFunc)
opt :PhotosFriendsRecommender==null
":FriendsRecommenderProxy"->+":PhotosFriendsRecommender": create()
end
":FriendsRecommenderProxy"->":PhotosFriendsRecommender": GetSuggestions(i_LoggedInUser, i_MaxResults, i_OrderByFunc)
opt cachedEventsAreStale
":PhotosFriendsRecommender"->":PhotosFriendsRecommender": get all user friends from all user's Photos
activate ":PhotosFriendsRecommender"
deactivate ":PhotosFriendsRecommender"
note right of ":PhotosFriendsRecommender": using Facebook API
end
":PhotosFriendsRecommender"->":PhotosFriendsRecommender": sort by i_OrderByFunc
activate ":PhotosFriendsRecommender"
deactivate ":PhotosFriendsRecommender"
":PhotosFriendsRecommender"->":PhotosFriendsRecommender": filter non relevant users
activate ":PhotosFriendsRecommender"
deactivate ":PhotosFriendsRecommender"
":PhotosFriendsRecommender"-->>-":FriendsRecommenderProxy" : list<Users>
":FriendsRecommenderProxy"-->>-"instace:FacebookBackend" : list<Users>

"instace:FacebookBackend"-->>-User : list<Users>